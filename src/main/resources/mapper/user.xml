<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="main.java.com.seckill.dao.UserDao">

    <select id="queryByCode" parameterType="string" resultType="main.java.com.seckill.entity.User">
    	select user_id,name,password,email,code,status,create_time
    	from user where code=#{code}
    </select>
	
	<insert id="register" parameterType="main.java.com.seckill.entity.User" >
	
		INSERT INTO user(name, password, email, code, status, create_time) 
		VALUES(#{name}, #{password}, #{email}, #{code}, 0, #{createTime})
	</insert>
	
	<update id="UpdateUserByCode" parameterType="string">
		UPDATE user 
		SET  status=1
		,code = null
		where code = #{code}
	</update>
</mapper>

